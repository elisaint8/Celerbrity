<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>데미지계산기</title>
    <style>
        body {
            margin: 10px;
            padding: 10px;
            font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
            background: #b8aaf9;
            border-style: inset;
        }

        .stat {
            font-size: 13px;
            width: 300px;
            block-size: 30px;
            display: block;
            
        }

        .lblStatName {
            display: inline-block;
            width: 130px;
            border: 1px;
            vertical-align: middle;
        }

        .inputStat {
            width: 60px;
        }

        .outputStat {
            width: 60px;
            text-align: right;
            display: inline-block;
        }

        .buffStat {
            width: 60px;
            text-align: right;
            display: inline-block;
        }

        .totStat {
            width: 80px;
        }
    </style>
</head>

<body>
    <div>
        <div>
            <label>
                <h3>캐릭터 스탯</h3>
            </label>
        </div>
        <div style="padding-bottom: 10px;">
            <label class="lblStatName" for="stat">스탯이름</label>
            <label class="lblStatName" for="stat">입력칸</label>
            <label class="lblStatName" for="stat">적용값</label>           
        </div>
        <div class="stat">
            <label class="lblStatName" for="att">공격력</label>
            <input type="number" class="inputStat" name="inAtt" id="inAtt">
            <label class="outputStat" name="outAtt" id="outAtt" readonly>0</label>
        </div>
        <div class="stat">
            <label class="lblStatName" for="cri">치명타확률</label>
            <input type="number" class="inputStat" name="inCri" id="inCri">
            <label class="outputStat" name="outCri" id="outCri" readonly>0</label>%
        </div>
        <div class="stat">
            <label class="lblStatName" for="cDmg">치명타데미지</label>
            <input type="number" class="inputStat" name="inCDmg" id="inCDmg">
            <label class="outputStat" name="outCDmg" id="outCDmg" readonly>200</label>%
        </div>
        <div class="stat">
            <label class="lblStatName" for="pDmg">방어관통력</label>
            <input type="number" class="inputStat" name="inPDmg" id="inPDmg">
            <label class="outputStat" name="outPDmg" id="outPDmg" readonly>0</label>
        </div>
        <div class="stat">
            <label class="lblStatName" for="dmg">데미지</label>
            <input type="number" class="inputStat" name="inADmg" id="inADmg">
            <label class="outputStat" name="outADmg" id="outADmg" readonly>100</label>%
        </div>
        <div class="stat">
            <label class="lblStatName" for="bdmg">보스데미지</label>
            <input type="number" class="inputStat" name="inBDmg" id="inBDmg">
            <label class="outputStat" name="outBDmg" id="outBDmg" readonly>100</label>%
        </div>
        <div class="stat">
            <label class="lblStatName" for="aspd">공격속도</label>
            <input type="number" class="inputStat" name="inASpd" id="inASpd">
            <label class="outputStat" name="outASpd" id="outASpd" readonly>100</label>%
        </div>

    </div>
    <div>
        <label>
            <h3>버프 스탯</h3>
        </label>
    </div>
    <div class="stat">
        <label class="lblStatName" for="attM">% 공격력</label>
        <input type="number" class="inputStat" name="inAttM" id="inAttM">%
        <label class="buffStat" name="outAttM" id="outAttM" readonly>0</label>%
    </div>
    <div class="stat">
        <label class="lblStatName" for="attF">고정공격력</label>
        <input type="number" class="inputStat" name="inAttF" id="inAttF">
        + <label class="buffStat" name="outAttF" id="outAttF" readonly>0</label>
    </div>
    <div class="stat">
        <label class="lblStatName" for="criF">치명타확률</label>
        <input type="number" class="inputStat" name="inCriF" id="inCriF">
        + <label class="buffStat" name="outCriF" id="outCriF" readonly>0</label>%
    </div>
    <div class="stat">
        <label class="lblStatName" for="cDmgF">치명타데미지</label>
        <input type="number" class="inputStat" name="inCDmgF" id="inCDmgF">
        + <label class="buffStat" name="outCDmgF" id="outCDmgF" readonly>0</label>%
    </div>
    <div class="stat">
            <label class="lblStatName" for="bDmgF">보스데미지</label>
            <input type="number" class="inputStat" name="inBDmgF" id="inBDmgF">
            + <label class="buffStat" name="outBDmgF" id="outBDmgF" readonly>0</label>%
        </div>
</div>

<input type="button" class="btnComp" name="comp" id="comp" value="완료"><br>
    <div class="stat">
        <label class="lblStatName" for="totAtt">최종 공격력</label> 
        <input type="text" readonly class="totStat" name="totAtt" id="totAtt" value="0">
    </div>
    <div class="stat">
        <label class="lblStatName" for="totCri">최종 크리티컬 확률</label>
        <input type="text" readonly class="totStat" name="totCri" id="totCri" value="0">
    </div>
    <div class="stat">
        <label class="lblStatName" for="totADmg">최종 데미지 증가</label>
        <input type="text" readonly class="totStat" name="totADmg" id="totADmg" value="0">
    </div>
    <div class="stat">
            <label class="lblStatName" for="totBDmg">최종 보스데미지 증가</label>
        <input type="text" readonly class="totStat" name="totBDmg" id="totBDmg" value="0">
    </div>
    <div>
        <input type="button" value="캐릭터 스탯 계산">
        <input type="text" readonly>
    </div>
    <script type="text/javascript">

       //참고 사이트들
       //https://gall.dcinside.com/mgallery/board/view/?id=vespa&no=599196&exception_mode=recommend&search_pos=-604002&s_type=search_all&s_keyword=%EA%B3%B5%EC%8B%9D&page=1
       //https://gall.dcinside.com/mgallery/board/view/?id=vespa&no=554178&exception_mode=recommend&search_pos=-556275&s_type=search_all&s_keyword=%EB%B0%A9%EA%B4%80&page=1
       //https://github.com/duckness/Mask-of-Goblin/blob/master/src/mixins/softcap.js
       //https://cafe.naver.com/kingsraid/736718 // 방어력 공식
       var changeStatClass = document.getElementsByClassName("inputStat");

        var att = document.getElementById("outAtt");
        var cri = document.getElementById("outCri");
        var cDmg = document.getElementById("outCDmg");
        var pDmg = document.getElementById("outPDmg");
        var aDmg = document.getElementById("outADmg");
        var bDmg = document.getElementById("outBDmg");
        var aSpd = document.getElementById("outASpd");
        var attM = document.getElementById("outAttM");
        var attF = document.getElementById("outAttF");
        var criF = document.getElementById("outCriF");
        var cDmgF = document.getElementById("outCDmgF");
        var bDmgF = document.getElementById("outBDmgF");


        var totAtt = document.getElementById("totAtt");
        var totCri = document.getElementById("totCri");
        var totCDmg = document.getElementById("totCDmg");
        var totBDmg = document.getElementById("totBDmg");
        
        var stats = document.querySelectorAll('.outputStat');


        var autoCal = document.querySelector('.lblStatName');
        var buffAtt = document.querySelector('#buffAttR')

        comp.addEventListener("click",calcDmg);
        //입력칸들에게 이벤트리스너 등록
        for(var i = 0; i<changeStatClass.length; i++) {
            changeStatClass[i].addEventListener("blur",calcStat)
        }
        function calcStat(){
            att.innerText = document.getElementById("inAtt").value*1;
            cri.innerText = document.getElementById("inCri").value/10.0;
            cDmg.innerText = document.getElementById("inCDmg").value*1+200;
            pDmg.innerText = document.getElementById("inPDmg").value*1;
            aDmg.innerText = document.getElementById("inADmg").value*1+100;
            bDmg.innerText = document.getElementById("inBDmg").value*1+100;
            aSpd.innerText = document.getElementById("inASpd").value*1+100;
            attM.innerText = document.getElementById("inAttM").value*1+100;
            attF.innerText = document.getElementById("inAttF").value*1;
            criF.innerText = document.getElementById("inCriF").value*1;
            cDmgF.innerText = document.getElementById("inCDmgF").value*1;
            bDmgF.innerText = document.getElementById("inBDmgF").value*1;
            totAtt.value = att.innerText * attM.innerText / 100 + attF.innerText*1;
            totCri
            
        }
        function clickBtn() {
            totAtt.value = att.innerText;           
        }
        var totAtt
        function calcDmg(){
            totAtt = stats
        }

        function deadCode(){
            document.getElementById("outHp").innerText = document.getElementById("inHp").value;
            document.getElementById("outPDef").innerText = document.getElementById("inPDef").value;
            document.getElementById("outMDef").innerText = document.getElementById("inMDef").value;
        }
    </script>
</body>

</html>